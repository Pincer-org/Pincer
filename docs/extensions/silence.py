from sphinx.domains.python import PythonDomain


class PatchedPythonDomain(PythonDomain):
    def resolve_xref(
        self, env, fromdocname, builder, typ, target, node, contnode
    ):
        if "refspecific" in node:
            del node["refspecific"]
        return super(PatchedPythonDomain, self).resolve_xref(
            env, fromdocname, builder, typ, target, node, contnode
        )


def setup(sphinx):
    sphinx.add_domain(PatchedPythonDomain, override=True)
